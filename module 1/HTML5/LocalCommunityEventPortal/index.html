<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Local Community Event Portal</title>
    <!-- Link to external CSS file -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Navigation Section -->
    <nav>
        <a href="#home">Home</a>
        <a href="#events">Events</a>
        <a href="#contact">Contact</a>
        <a href="help.html" target="_blank">Help</a>
    </nav>

    <!-- Welcome Banner Section -->
    <div id="welcomeBanner">
        <h1 style="color: #e74c3c; text-shadow: 2px 2px 4px rgba(0,0,0,0.2); background-color: blue;">Welcome to Our Community Portal</h1>
        <p>Join us for exciting local events! <span style="color: red; font-weight: bold;">Special offer: First event free!</span></p>
    </div>

    <!-- Main Content Section -->
    <main>
        <!-- Events Section -->
        <section id="events">
            <h2>Upcoming Events</h2>
            <table class="event-gallery">
                <tr>
                    <td>
                        <img src="https://img.freepik.com/free-photo/excited-audience-watching-confetti-fireworks-having-fun-music-festival-night-copy-space_637285-559.jpg" alt="Music Fest" title="Music Fest" class="event-image" ondblclick="enlargeImage(this)" width="150" height="150">
                        <p>Music Night</p>
                    </td>
                    <td>
                        <img src="https://i0.wp.com/www.tusktravel.com/blog/wp-content/uploads/2022/05/Popular-Food-Festival-In-India.jpg?fit=1024%2C683&ssl=1" alt="Food Fair" title="Food Fair" class="event-image" ondblclick="enlargeImage(this)" width="150" height="150">
                        <p>Food Fair</p>
                    </td>
                    <td>
                        <img src="https://boisedev.com/wp-content/uploads/2024/11/go-do-it-paint-n-sip-shutterstock-2470344.jpg" alt="Art Show" title="Art Show" class="event-image" ondblclick="enlargeImage(this)" width="150" height="150">
                        <p>Art Show</p>
                    </td>
                </tr>
                <tr>
                    <td>
                        <img src="https://c.ndtvimg.com/2023-06/68pf2edg_international-yoga-day-2023_625x300_21_June_23.jpg" alt="Yoga Day" title="Yoga Day" class="event-image" ondblclick="enlargeImage(this)" width="150" height="150">
                        <p>Yoga Day</p>
                    </td>
                    <td>
                        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQLuTjczO6cueyKcVBH10zpRMg7mm0bDn7Uyw&s" alt="Cultural Fest" title="Cultural Fest" class="event-image" ondblclick="enlargeImage(this)" width="150" height="150">
                        <p>Cultural Festival</p>
                    </td>
                    <td>
                        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRfJiCi-ihHTj3XMx9CGDolxeQIP1_l15S1hA&s" alt="Marathon" title="Marathon" class="event-image" ondblclick="enlargeImage(this)" width="150" height="150">
                        <p>Marathon</p>
                    </td>
                </tr>
            </table>
        </section>

        <!-- Registration Form Section -->
        <section id="registration">
            <h2>Event Registration</h2>
            <form class="registration-form" id="eventForm" onsubmit="return handleSubmit(event)">
                <div class="form-group">
                    <label for="name">Name:</label>
                    <input type="text" id="name" name="name" required autofocus placeholder="Enter your full name">
                </div>
                <div class="form-group">
                    <label for="email">Email:</label>
                    <input type="email" id="email" name="email" required placeholder="Enter your email">
                </div>
                <div class="form-group">
                    <label for="phone">Phone:</label>
                    <input type="tel" id="phone" name="phone" onblur="validatePhone(this)" placeholder="Enter your phone number">
                </div>
                <div class="form-group">
                    <label for="date">Event Date:</label>
                    <input type="date" id="date" name="date" required>
                </div>
                <div class="form-group">
                    <label for="eventType">Choose your preferred event type:</label>
<select id="eventType" name="eventType">
  <option value="">-- Select an event type --</option>
  <option value="Music">Music</option>
  <option value="Art">Art</option>
  <option value="Technology">Technology</option>
</select>
<button type="button" onclick="clearPreferences()">Clear Preferences</button>

                </div>
                <div class="form-group">
                    <label for="message">Message:</label>
                    <textarea id="message" name="message" onkeyup="countCharacters(this)" placeholder="Any special requirements?"></textarea>
                    <p>Character count: <span id="charCount">0</span></p>
                </div>
                <button type="submit" onclick="showConfirmation()">Register</button>
                <output id="confirmation"></output>
            </form>
        </section>
<!-- Replace the existing video section with this updated code -->
<h2>Event Promo Video</h2>

<!-- Embedded YouTube video -->
<div id="player"></div>
<div class="video-controls">
    <button onclick="playVideo()">Play</button>
    <button onclick="pauseVideo()">Pause</button>
    <button onclick="restartVideo()">Restart</button>
</div>

<script>
// YouTube Player API integration
var tag = document.createElement('script');
tag.src = "https://www.youtube.com/iframe_api";
var firstScriptTag = document.getElementsByTagName('script')[0];
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

var player;
function onYouTubeIframeAPIReady() {
    player = new YT.Player('player', {
        height: '315',
        width: '560',
        videoId: 'YG8-Yb3utHM',
        playerVars: {
            'playsinline': 1
        },
        events: {
            'onReady': onPlayerReady
        }
    });
}

function onPlayerReady(event) {
    // Video is ready to play
    console.log('Video is ready');
}

function playVideo() {
    if (player) {
        player.playVideo();
    }
}

function pauseVideo() {
    if (player) {
        player.pauseVideo();
    }
}

function restartVideo() {
    if (player) {
        player.seekTo(0);
        player.playVideo();
    }
}
</script>
            </div>
        </section>

        <!-- Geolocation Section -->
        <section id="location">
            <h2>Find Nearby Events</h2>
            <button onclick="findNearbyEvents()">Find Nearby Events</button>
<p id="locationResult"></p>

            <div id="nearbyEvents" style="margin-top: 20px;">
                <h3>Events Near You</h3>
                <div id="eventsList"></div>
            </div>
        </section>

        <!-- Preferences Section -->
        <section id="preferences">
            <h2>Your Preferences</h2>
            <button onclick="clearPreferences()">Clear Preferences</button>
        </section>
    </main>

    <!-- Footer Section -->
    <footer>
        <p>&copy; 2024 Local Community Event Portal. All rights reserved.</p>
    </footer>

    <script>
    function validatePhone(input) {
        const phoneRegex = /^\d{10}$/;
        if (!phoneRegex.test(input.value)) {
            alert('Please enter a valid 10-digit phone number');
            input.focus();
        }
    }

    function updateFee(select) {
        const fees = {
            festival: '$20',
            art: '$15',
            food: '$25',
            music: '$30',
            sports: '$10',
            workshop: '$35'
        };
        const selectedFee = fees[select.value] || 'Select an event to see fee';
        alert(`Event Fee: ${selectedFee}`);
        localStorage.setItem('preferredEvent', select.value);
    }

    function countCharacters(textarea) {
        const count = textarea.value.length;
        document.getElementById('charCount').textContent = count;
    }

    function enlargeImage(img) {
        img.style.width = img.style.width === '200%' ? '100%' : '200%';
    }

    function showConfirmation() {
        document.getElementById('confirmation').textContent = 'Registration submitted successfully!';
    }

    function handleSubmit(event) {
        event.preventDefault();
        showConfirmation();
        return false;
    }

    window.onload = function () {
        const savedEvent = localStorage.getItem('preferredEvent');
        if (savedEvent) {
            document.getElementById('eventType').value = savedEvent;
        }
    };

    window.onbeforeunload = function (e) {
        const form = document.getElementById('eventForm');
        if (form && form.checkValidity()) {
            return 'You have unsaved changes. Are you sure you want to leave?';
        }
    };
    // Load saved preference on page load
window.onload = function () {
    const savedType = localStorage.getItem("preferredEventType");
    if (savedType) {
        document.getElementById("eventType").value = savedType;
    }

    document.getElementById("eventType").addEventListener("change", function () {
        const selected = this.value;
        localStorage.setItem("preferredEventType", selected);
        sessionStorage.setItem("selectedNow", selected); // Optional use of sessionStorage
    });
};

// Clear localStorage and sessionStorage
function clearPreferences() {
    localStorage.removeItem("preferredEventType");
    sessionStorage.clear();
    alert("Preferences cleared!");
    document.getElementById("eventType").value = "";
};

    function showMessage() {
      document.getElementById("message").textContent = "Video ready to play";
    }

    // Warn user if they try to leave the page
    window.onbeforeunload = function () {
      return "Are you sure you want to leave? Your form may be unfinished.";
    };
function findNearbyEvents() {
    const result = document.getElementById("locationResult");

    if (!navigator.geolocation) {
        result.textContent = "Geolocation is not supported by your browser.";
        return;
    }

    const options = {
        enableHighAccuracy: true,
        timeout: 10000, // 10 seconds
        maximumAge: 0
    };

    navigator.geolocation.getCurrentPosition(
        (position) => {
            const lat = position.coords.latitude.toFixed(6);
            const lon = position.coords.longitude.toFixed(6);
            result.textContent = `Your location: Latitude ${lat}, Longitude ${lon}`;
        },
        (error) => {
            switch (error.code) {
                case error.PERMISSION_DENIED:
                    result.textContent = "Location permission denied.";
                    break;
                case error.POSITION_UNAVAILABLE:
                    result.textContent = "Location information is unavailable.";
                    break;
                case error.TIMEOUT:
                    result.textContent = "Location request timed out.";
                    break;
                default:
                    result.textContent = "An unknown error occurred.";
            }
        },
        options
    );
};
<!-- Add this before the closing </body> tag, inside the <script> section -->


// Video control functions
function playVideo() {
    const video = document.querySelector('iframe');
    if (video) {
        video.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}', '*');
    }
}

function pauseVideo() {
    const video = document.querySelector('iframe');
    if (video) {
        video.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}', '*');
    }
}

function restartVideo() {
    const video = document.querySelector('iframe');
    if (video) {
        video.contentWindow.postMessage('{"event":"command","func":"seekTo","args":[0]}', '*');
        video.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}', '*');
    }
}
</script>
</body>
</html>